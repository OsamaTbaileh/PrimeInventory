{% set css_files = '<link rel="stylesheet" href="../../static/css/login_register.css">' %}
{% include 'general/header.html' %}


<div class="mx-0 px-0 mw-100 my-5 pb-3 pt-5 d-flex justify-content-center">
  <div class="container login-registration-container mx-0 mx-sm-1 mx-md-1 mx-lg-5 ">

    <input type="checkbox" id="flip" {% if 'error' in get_flashed_messages() %}checked{% endif %}>
    <div class="cover">
        <div class="text">
          <span class="text-1">Your Vision, Our Commitment<br> Trust Us to Keep Everything in Sight</span>
          <span class="text-2">Let's get connected</span>
        </div>
    </div>

    <div class="forms">
      <div class="form-content">

        <div class="login-form">
          {% with messages = get_flashed_messages(category_filter=['success']) %}
            {% if messages %}
              {% for message in messages %}
                <div class="alert alert-success" role="alert">
                  {{message}}
                    </div> 
              {% endfor %}
            {% endif %} 
          {% endwith %}
          {% with messages = get_flashed_messages(category_filter=['fail']) %}
            {% if messages %}
              {% for message in messages %}
                <div class="alert alert-danger" role="alert">
                  {{message}}
                    </div> 
              {% endfor %}
            {% endif %} 
          {% endwith %}
          <h1 class="title">Sign In</h1>
          <form action="/signing_in" method="post" enctype="multipart/form-data">
            <div class="input-boxes">
              <div class="input-box">
                <i class="fas fa-envelope"></i>
                <input type="email" placeholder="Enter your email"  name="email">
              </div>
              <div class="input-box">
                <i class="fas fa-lock"></i>
                <input type="password" placeholder="Enter your password"  name="password">
              </div>
              <!-- <div class="text"><a href="#">Forgot password?</a></div> -->
              <div class="button input-box">
                <input type="submit" value="Sign In">
              </div>
                <div class="text sign-up-text">Don't have an account? <label class="flip" for="flip">Sign Up Now</label></div>
            </div>
          </form>
        </div>

        <div class="signup-form">
          <h1 class="title">Sign up</h1>
          <form action="/create_user" method="post" enctype="multipart/form-data">
            <div class="input-boxes">

              <!-- First Name -->
              {% with messages = get_flashed_messages(category_filter=['first_name']) %}
                {% if messages %}
                  {% for message in messages %}
                    <div class="alert alert-warning p-0 m-0" role="alert">
                      {{message}}
                        </div> 
                  {% endfor %}
                {% endif %} 
              {% endwith %}
              <div class="input-box">
                <i class="fas fa-user"></i>
                <input type="text" placeholder="Enter your first name" name="first_name" >
              </div>

              <!-- Last Name -->
              {% with messages = get_flashed_messages(category_filter=['last_name']) %}
                {% if messages %}
                  {% for message in messages %}
                    <div class="alert alert-warning p-0 m-0" role="alert">
                      {{message}}
                        </div> 
                  {% endfor %}
                {% endif %} 
              {% endwith %}
              <div class="input-box">
                <i class="fas fa-user"></i>
                <input type="text" placeholder="Enter your last name" name="last_name" >
              </div>

              <!-- email -->
              {% with messages = get_flashed_messages(category_filter=['email']) %}
                {% if messages %}
                  {% for message in messages %}
                    <div class="alert alert-warning p-0 m-0" role="alert">
                      {{message}}
                        </div> 
                  {% endfor %}
                {% endif %} 
              {% endwith %}
              <div class="input-box">
                <i class="fas fa-envelope"></i>
                <input type="email" placeholder="Enter your email" name="email" >
              </div>

              <!-- Password -->
              {% with messages = get_flashed_messages(category_filter=['password']) %}
                {% if messages %}
                  {% for message in messages %}
                    <div class="alert alert-warning p-0 m-0" role="alert">
                      {{message}}
                        </div> 
                  {% endfor %}
                {% endif %} 
              {% endwith %}
              <div class="input-box">
                <i class="fas fa-lock"></i>
                <input type="password" placeholder="Enter your password" name="password" >
              </div>

              <!-- Confirm Password -->
              <div class="input-box">
                <i class="fas fa-key"></i>
                <input type="password" placeholder="Confirm your password" name="confirm_password" >
              </div>

              <!-- Gender -->
              {% with messages = get_flashed_messages(category_filter=['gender']) %}
                {% if messages %}
                  {% for message in messages %}
                    <div class="alert alert-warning p-0 m-0" role="alert">
                      {{message}}
                        </div> 
                  {% endfor %}
                {% endif %} 
              {% endwith %}
              <div class="row flex-row align-items-center mx-0 special-input-box">
                <div class="input-box my-0 col-md-3 col-lg-2 px-0">
                  <i class="fas fa-venus-mars"></i>
                  <label>Gender:</label>
                </div>
                <div class="d-flex flex-row col-md-9 px-0 ps-2">
                  <div class="radio-box mx-1">
                    <label for="male">
                      <input type="radio" id="male" name="gender" value="m" >
                      Male
                    </label>
                  </div>
                  <div class="radio-box mx-1">
                    <label for="female">
                      <input type="radio" id="female" name="gender" value="f" >
                      Female
                    </label>
                  </div>
                  <div class="radio-box mx-1">
                    <label for="other">
                      <input type="radio" id="other" name="gender" value="o" >
                      Other
                    </label>
                  </div>
                </div>
              </div>

              <!-- Phone Number -->
              {% with messages = get_flashed_messages(category_filter=['phone']) %}
                {% if messages %}
                  {% for message in messages %}
                    <div class="alert alert-warning p-0 m-0" role="alert">
                      {{message}}
                        </div> 
                  {% endfor %}
                {% endif %} 
              {% endwith %}
              <div class="row flex-row align-items-center mx-0 special-input-box">
                <div class="input-box mb-0 col-md-3 col-lg-2 px-0">
                  <i class="fas fa-phone"></i>
                  <label class="form-label mb-0">Phone:</label>
                </div>
                <div class="col-md-9">
                  <input type="tel" id="phone" placeholder="Phone Number" value="+970" class="col-12 form-control" name="phone" >
                </div>
              </div>

              <!-- Image -->
              {% with messages = get_flashed_messages(category_filter=['user_image']) %}
              {% if messages %}
                {% for message in messages %}
                  <div class="alert alert-warning p-0 m-0" role="alert">
                    {{message}}
                      </div> 
                {% endfor %}
              {% endif %} 
              {% endwith %}
              <div class="row flex-row align-items-center mx-0 special-input-box">
                <div class="input-box mb-0 col-md-3 col-lg-2 px-0">
                  <i class="fas fa-image"></i>
                  <label for="formFile" class="form-label mb-0">Image:</label>
                </div>
                <div class="col-md-9">
                  <input class="form-control my-0" type="file" id="formFile" name="user_image" accept="image/*">
                </div>
              </div>

              <!-- Job Title -->
              {% with messages = get_flashed_messages(category_filter=['job_title']) %}
                {% if messages %}
                  {% for message in messages %}
                    <div class="alert alert-warning p-0 m-0" role="alert">
                      {{message}}
                        </div> 
                  {% endfor %}
                {% endif %} 
              {% endwith %}
              <div class="row flex-row align-items-center mx-0 special-input-box">
                <div class="input-box mb-0 col-md-3 col-lg-2 px-0">
                  <i class="fas fa-id-card"></i>
                  <label class="form-label mb-0">Job title:</label>
                </div>
                <div class="col-md-9">
                  <select class="form-select" aria-label="Default select example" name="job_title" >
                    <option value="">Choose here</option>
                    <option value="2">Manager</option>
                    <option value="3">Worker</option>
                  </select>
                </div>
              </div>

              <!-- Country -->
              {% with messages = get_flashed_messages(category_filter=['country']) %}
                {% if messages %}
                  {% for message in messages %}
                    <div class="alert alert-warning p-0 m-0" role="alert">
                      {{message}}
                        </div> 
                  {% endfor %}
                {% endif %} 
              {% endwith %}
              <div class="row flex-row align-items-center mx-0 special-input-box">
                <div class="input-box mb-0 col-md-3 col-lg-2 px-0">
                  <i class="fas fa-flag"></i>
                  <label class="form-label mb-0">Country:</label>
                </div>
                <div class="col-md-9">
                  <select id="country" class="form-select" aria-label="Default select example" name="country" >
                    <option value="">Choose here</option>
                  </select>
                </div>
              </div>

              <!-- City -->
              {% with messages = get_flashed_messages(category_filter=['city']) %}
                {% if messages %}
                  {% for message in messages %}
                    <div class="alert alert-warning p-0 m-0" role="alert">
                      {{message}}
                        </div> 
                  {% endfor %}
                {% endif %} 
              {% endwith %}
              <div class="input-box">
                <i class="fas fa-city"></i>
                <input type="text" placeholder="Enter your city" name="city" >
              </div>

              <!-- Street -->
              {% with messages = get_flashed_messages(category_filter=['street']) %}
                {% if messages %}
                  {% for message in messages %}
                    <div class="alert alert-warning p-0 m-0" role="alert">
                      {{message}}
                        </div> 
                  {% endfor %}
                {% endif %} 
              {% endwith %}
              <div class="input-box">
                <i class="fas fa-road"></i>
                <input type="text" placeholder="Enter your street" name="street" >
              </div>

              <!-- Postal Code -->
              {% with messages = get_flashed_messages(category_filter=['postal_code']) %}
                {% if messages %}
                  {% for message in messages %}
                    <div class="alert alert-warning p-0 m-0" role="alert">
                      {{message}}
                        </div> 
                  {% endfor %}
                {% endif %} 
              {% endwith %}
              <div class="input-box">
                <i class="fas fa-location-arrow"></i>
                <input type="text" placeholder="Enter your postal code" name="postal_code" >
              </div>

              <!-- Submit Button -->
              <div class="button input-box">
                <input type="submit" value="Submit">
              </div>

              <div class="text sign-up-text">Already have an account? <label class="flip" for="flip">Sign In now</label></div>

            </div>
          </form>
        </div>

      </div>
    </div>

  </div>
</div>


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- This script is to fetch all country entry in the phone input. -->
<script src="../../static/js/signin_phone_number/intlTelInput.js"></script>
<script>
  var input = document.querySelector("#phone");
  window.intlTelInput(input,{})
</script>

<!-- This script is to prevent the user from deleteing the + sign in the phone input. -->
<script>
  const phoneInput = document.getElementById('phone');
  phoneInput.addEventListener('input', function(e) {
    // Remove any non-digit characters from the input
    const cleanedValue = this.value.replace(/\D/g, '');
    
    // Add the "+" symbol at the beginning of the cleaned value
    this.value = '+' + cleanedValue;
  });
</script>

<!-- This script is to fetch all country names in the country input. -->
<script>
  // Get the select element
  var select = document.getElementById("country");

  // Fetch the list of countries from the new API
  fetch("https://countriesnow.space/api/v0.1/countries/info?returns=name")
    .then(response => response.json())
    .then(data => {
      // Extract country names from the data
      var countries = data.data.map(country => country.name);

      // Sort the countries alphabetically
      countries = countries.sort((a, b) => a.localeCompare(b));

      // Loop through the sorted countries array and create an option for each country
      countries.forEach(country => {
        var option = document.createElement("option");
        option.value = country;
        option.text = country;
        select.appendChild(option);
      });
    })
    .catch(error => console.log(error));
</script>


{%include 'general/footer.html'%}  